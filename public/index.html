<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link-Lite - ê°„í¸í•œ ë¦¬ë”ì‹­ ì§„ë‹¨ (Public í´ë” ë°°í¬ í…ŒìŠ¤íŠ¸)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="premium-style.css?v=49&disabled=fixed">
    <link rel="stylesheet" href="mobile-native.css?v=49&disabled=fixed">
    <meta name="description" content="20ê°œ ê°„ë‹¨í•œ ì§ˆë¬¸ìœ¼ë¡œ ë‚˜ì˜ ë¦¬ë”ì‹­ ìŠ¤íƒ€ì¼ì„ í™•ì¸í•˜ê³  íŒ€ì›ë“¤ê³¼ ë” ì˜ ì†Œí†µí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì„¸ìš”.">
</head>
<body class="welcome-page">
    <div class="premium-container">
        <div class="glass-card">
            <div class="glass-header">
                <h1>Link-Lite</h1>
                <p class="subtitle">ê°„í¸í•œ ë¦¬ë”ì‹­ ì§„ë‹¨ & íŒ€ ê¶í•© ì²´í¬</p>
            </div>

            <div class="premium-content">
                <!-- ì‹œì‘ í™”ë©´ -->
                <div id="welcome" class="premium-section active">
                    <div class="welcome-section">
                        <h2 class="welcome-title">ë¦¬ë”ì—ì„œ ë§ì»¤ë¡œ</h2>
                        <p class="welcome-description">
                            ë””ì§€í„¸ ì‹œëŒ€ ìƒˆë¡œìš´ ë¦¬ë”ì‹­ íŒ¨ëŸ¬ë‹¤ì„<br>
                            ë§ì»¤ì‹­(Linkership) ì§„ë‹¨ìœ¼ë¡œ íŒ€ ì—°ê²°ì˜ í˜ì„ ë°œê²¬í•˜ì„¸ìš”
                        </p>

                        <div class="feature-grid">
                            <div class="feature-item">
                                <div class="feature-icon-modern analytics"></div>
                                <div class="feature-content">
                                    <h3 class="feature-title">SIG ëª¨ë¸ ì§„ë‹¨</h3>
                                    <p class="feature-description">ê³µìœ Â·ìƒí˜¸ì‘ìš©Â·ì„±ì¥ ì˜ì—­ ë¶„ì„</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon-modern collaboration"></div>
                                <div class="feature-content">
                                    <h3 class="feature-title">íŒ”ë¡œì›Œì‹­ ë§¤ì¹­</h3>
                                    <p class="feature-description">íŒ€ì› ìœ í˜•ë³„ ë§ì¶¤ ì½”ì¹­ ì „ëµ</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon-modern insights"></div>
                                <div class="feature-content">
                                    <h3 class="feature-title">ë§ì»¤ì‹­ ì „í™˜</h3>
                                    <p class="feature-description">ì—°ê²°ìë¡œì„œì˜ ì‹¤í–‰ ê°€ì´ë“œ</p>
                                </div>
                            </div>
                        </div>

                        <button class="premium-btn" onclick="startAssessment()">
                            <span>ì§„ë‹¨ ì‹œì‘</span>
                            <span>â†’</span>
                        </button>
                    </div>
                </div>

                <!-- ì§„ë‹¨ í™”ë©´ -->
                <div id="assessment" class="premium-section">
                    <div class="premium-progress">
                        <div class="premium-progress-fill" id="progressBar"></div>
                    </div>

                    <div class="premium-question-card">
                        <div class="question-meta">
                            <div class="question-number" id="questionNumber"></div>
                            <div class="question-category" id="questionCategory"></div>
                        </div>

                        <div class="question-text" id="questionText"></div>

                        <div id="interactiveInput"></div>
                    </div>

                    <div class="premium-nav">
                        <button class="premium-btn premium-btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>
                            â† ì´ì „
                        </button>
                        <button class="premium-btn" id="nextBtn" onclick="nextQuestion()" disabled>
                            <span id="nextBtnText">ë‹¤ìŒ</span>
                            <span>â†’</span>
                        </button>
                    </div>
                </div>

                <!-- ê²°ê³¼ í™”ë©´ -->
                <div id="results" class="premium-section">
                    <div class="premium-results">
                        <div class="results-hero">
                            <div class="leadership-type" id="leadershipType"></div>
                            <div class="type-description" id="typeDescription"></div>
                        </div>

                        <div class="scores-grid">
                            <div class="score-card">
                                <div class="score-title">Sharing (ê³µìœ )</div>
                                <div class="score-value" id="sharingScore"></div>
                                <div class="score-label">ëª©í‘œ ê³µìœ  ë° ì°¸ì—¬ ì´‰ì§„</div>
                            </div>
                            <div class="score-card">
                                <div class="score-title">Interaction (ìƒí˜¸ì‘ìš©)</div>
                                <div class="score-value" id="interactionScore"></div>
                                <div class="score-label">ê´€ê³„ êµ¬ì¶• ë° ì†Œí†µ ì—­ëŸ‰</div>
                            </div>
                            <div class="score-card">
                                <div class="score-title">Growth (ì„±ì¥)</div>
                                <div class="score-value" id="growthScore"></div>
                                <div class="score-label">ê°œë³„ ì„±ì¥ ì§€ì› ì—­ëŸ‰</div>
                            </div>
                        </div>

                        <div class="followership-section">
                            <h3 class="section-title">íŒ€ì›ì˜ íŒ”ë¡œì›Œì‹­ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</h3>
                            <p class="section-description">íŒ€ì›ë“¤ì˜ íŒ”ë¡œì›Œì‹­ ìœ í˜•ì„ ì„ íƒí•˜ë©´ ë§ì¶¤í˜• ì½”ì¹­ ì „ëµì„ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤.</p>
                            <div class="followership-grid" id="followershipOptions"></div>
                            <button class="premium-btn" onclick="analyzeCompatibility()" id="analyzeBtn" disabled>
                                <span>íŒ€ ê¶í•© ë¶„ì„í•˜ê¸°</span>
                                <span>â†’</span>
                            </button>
                        </div>

                        <div id="compatibilityResults" class="compatibility-results" style="display: none;">
                            <h3 class="section-title">íŒ€ ê¶í•© ë¶„ì„ ê²°ê³¼</h3>
                            <div id="compatibilityList"></div>
                        </div>

                        <div style="margin-top: var(--space-12); text-align: center;">
                            <button class="premium-btn premium-btn-secondary" onclick="resetAssessment()">
                                â†» ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="leadership-assessment.js?v=8"></script>
    <script src="team-compatibility.js?v=8"></script>
    <script src="mobile-native.js?v=15"></script>
    <script>
        let assessment = new LeadershipAssessment();
        let teamCompatibility = new TeamCompatibility();
        let currentQuestion = 0;
        let selectedFollowerTypes = []; // { id: string, name: string, memberName: string }
        let mobileInput = null;
        let mobileNav = null;

        function startAssessment() {
            showSection('assessment');

            // Initialize mobile navigation for mobile screens
            if (window.innerWidth <= 768 && !mobileNav) {
                mobileNav = new MobileNavigationManager();
            }

            loadQuestion(0);
        }

        function showSection(sectionId) {
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.premium-section').forEach(section => {
                section.classList.remove('active');
            });

            // body í´ë˜ìŠ¤ ë³€ê²½ (í˜ì´ì§€ë³„ ë ˆì´ì•„ì›ƒ)
            document.body.className = sectionId === 'welcome' ? 'welcome-page' : 'content-page';

            // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
            if (mobileNav) {
                if (sectionId === 'results' || sectionId === 'welcome') {
                    // ê²°ê³¼ í˜ì´ì§€ë‚˜ ì‹œì‘ í˜ì´ì§€ì—ì„œëŠ” ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€
                    mobileNav.hide();
                } else {
                    // ì§„ë‹¨ í˜ì´ì§€ì—ì„œë§Œ ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ í‘œì‹œ
                    mobileNav.show();
                }
            }

            // ìƒˆ ì„¹ì…˜ í‘œì‹œ
            setTimeout(() => {
                document.getElementById(sectionId).classList.add('active');
            }, 150);
        }

        function loadQuestion(index) {
            currentQuestion = index;
            const question = assessment.getQuestion(index);
            const totalQuestions = assessment.getTotalQuestions();

            // ì§ˆë¬¸ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('questionNumber').textContent = `${index + 1} / ${totalQuestions}`;
            document.getElementById('questionCategory').textContent = getCategoryName(question.category);
            document.getElementById('questionText').textContent = question.text;

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const progress = ((index + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // ëª¨ë°”ì¼ ë„¤ì´í‹°ë¸Œ ì…ë ¥ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
            const inputContainer = document.getElementById('interactiveInput');

            // ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ ì •ë¦¬
            if (mobileInput) {
                mobileInput.destroy();
            }

            // ìƒˆ ëª¨ë°”ì¼ ì…ë ¥ ìƒì„±
            const currentResponse = assessment.responses[question.id]; // undefined if not answered
            mobileInput = new MobileNativeInput(inputContainer, {
                defaultValue: currentResponse, // Will be null for new questions
                min: 1,
                max: 6,
                onChange: (value) => {
                    assessment.recordResponse(question.id, value);
                    updateNextButton();
                }
            });

            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('prevBtn').disabled = index === 0;
            updateNextButton();

            // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸ (ëª¨ë°”ì¼ í™”ë©´ì—ì„œë§Œ)
            if (mobileNav && window.innerWidth <= 768) {
                const canGoPrev = index > 0;
                const canGoNext = assessment.responses[question.id] !== undefined;
                const isLastQuestion = index === assessment.getTotalQuestions() - 1;
                const nextText = isLastQuestion ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ';

                mobileNav.updateNavigation(canGoPrev, canGoNext, nextText);
            }
        }

        function getCategoryName(category) {
            const names = {
                'sharing': 'ê³µìœ  ë° ì°¸ì—¬',
                'interaction': 'ìƒí˜¸ì‘ìš©',
                'growth': 'ì„±ì¥ì§€í–¥'
            };
            return names[category] || category;
        }

        // selectScale í•¨ìˆ˜ëŠ” ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŒ (ì¸í„°ë™í‹°ë¸Œ ì…ë ¥ì—ì„œ ì²˜ë¦¬)

        function updateNextButton() {
            const question = assessment.getQuestion(currentQuestion);
            const hasResponse = assessment.responses[question.id] !== undefined;
            const isLastQuestion = currentQuestion === assessment.getTotalQuestions() - 1;

            const nextBtn = document.getElementById('nextBtn');
            const nextBtnText = document.getElementById('nextBtnText');

            nextBtn.disabled = !hasResponse;
            nextBtnText.textContent = isLastQuestion ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ';

            // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ë„ ì—…ë°ì´íŠ¸ (ëª¨ë°”ì¼ í™”ë©´ì—ì„œë§Œ)
            if (mobileNav && window.innerWidth <= 768) {
                const canGoPrev = currentQuestion > 0;
                const nextText = isLastQuestion ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ';
                mobileNav.updateNavigation(canGoPrev, hasResponse, nextText);
            }
        }

        function nextQuestion() {
            if (currentQuestion < assessment.getTotalQuestions() - 1) {
                loadQuestion(currentQuestion + 1);
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                loadQuestion(currentQuestion - 1);
            }
        }

        function showResults() {
            const result = assessment.determineLeadershipType();

            // ë” ìì„¸í•œ ë””ë²„ê¹…ìš© ë¡œê·¸
            console.log('=== LEADERSHIP TYPE DEBUG ===');
            console.log('Assessment object:', assessment);
            console.log('Assessment result:', result);
            console.log('Type code:', result.code);
            console.log('Type object:', result.type);
            console.log('Scores:', result.scores);
            console.log('Available leadership types:', assessment.leadershipTypes);
            console.log('Type found in leadershipTypes:', assessment.leadershipTypes[result.code]);
            console.log('=============================');

            // ë¦¬ë”ì‹­ ìœ í˜• í‘œì‹œ
            const leadershipTypeElement = document.getElementById('leadershipType');
            const typeDescriptionElement = document.getElementById('typeDescription');

            if (result.type && result.type.name) {
                leadershipTypeElement.textContent = result.type.name;
                typeDescriptionElement.textContent = result.type.description;
                console.log('âœ“ Successfully displayed leadership type:', result.type.name);
            } else {
                // ë¬¸ì œê°€ ìˆì„ ë•Œ ë” ìì„¸í•œ ë””ë²„ê¹… ì •ë³´ í‘œì‹œ
                const debugInfo = `ë””ë²„ê·¸: ì½”ë“œ=${result.code}, íƒ€ì…ê°ì²´=${JSON.stringify(result.type)}`;
                leadershipTypeElement.textContent = debugInfo;
                typeDescriptionElement.textContent = `ì ìˆ˜ - ê³µìœ :${result.scores.sharing.toFixed(1)}, ìƒí˜¸ì‘ìš©:${result.scores.interaction.toFixed(1)}, ì„±ì¥:${result.scores.growth.toFixed(1)}`;
                console.error('âœ— Failed to display leadership type. Result.type:', result.type);
                console.error('âœ— Code lookup result:', assessment.leadershipTypes[result.code]);
            }

            document.getElementById('sharingScore').textContent = result.scores.sharing.toFixed(1);
            document.getElementById('interactionScore').textContent = result.scores.interaction.toFixed(1);
            document.getElementById('growthScore').textContent = result.scores.growth.toFixed(1);

            // íŒ”ë¡œì›Œì‹­ ì˜µì…˜ ìƒì„±
            createFollowershipOptions();

            showSection('results');
        }

        function createFollowershipOptions() {
            const container = document.getElementById('followershipOptions');
            container.innerHTML = '';

            // íŒ”ë¡œì›Œì‹­ ì„¹ì…˜ ìŠ¤íƒ€ì¼ ì¶”ê°€
            if (!document.querySelector('.followership-section-style')) {
                const style = document.createElement('style');
                style.className = 'followership-section-style';
                style.textContent = `
                    .followership-section {
                        background: var(--primary-50);
                        border-radius: var(--radius-2xl);
                        padding: var(--space-10);
                        margin-top: var(--space-12);
                        border: 1px solid var(--primary-200);
                    }

                    .section-title {
                        font-size: var(--font-size-2xl);
                        font-weight: 600;
                        color: var(--primary-900);
                        margin-bottom: var(--space-4);
                        text-align: center;
                    }

                    .section-description {
                        color: var(--primary-600);
                        text-align: center;
                        margin-bottom: var(--space-8);
                    }

                    .followership-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
                        gap: var(--space-4);
                        margin-bottom: var(--space-8);
                    }

                    .followership-card {
                        background: white;
                        border: 2px solid var(--primary-200);
                        border-radius: var(--radius-xl);
                        padding: var(--space-6);
                        cursor: pointer;
                        transition: all var(--transition-base);
                        text-align: left;
                        position: relative;
                    }

                    .followership-card:hover {
                        border-color: var(--accent-400);
                        transform: translateY(-2px);
                        box-shadow: var(--shadow-md);
                    }

                    .followership-card.selected {
                        border-color: var(--accent-500);
                        background: linear-gradient(135deg, var(--accent-500), var(--accent-400));
                        color: white;
                        transform: translateY(-2px);
                        box-shadow: var(--shadow-lg);
                    }

                    .followership-name {
                        font-weight: 600;
                        font-size: var(--font-size-lg);
                        margin-bottom: var(--space-2);
                    }

                    .followership-desc {
                        font-size: var(--font-size-sm);
                        opacity: 0.9;
                        line-height: 1.5;
                    }

                    .compatibility-results {
                        margin-top: var(--space-12);
                    }

                    .compatibility-item {
                        background: white;
                        border-radius: var(--radius-xl);
                        padding: var(--space-6);
                        margin-bottom: var(--space-4);
                        display: flex;
                        align-items: center;
                        gap: var(--space-6);
                        box-shadow: var(--shadow-md);
                        border: 1px solid var(--primary-100);
                        transition: all var(--transition-base);
                    }

                    .compatibility-item:hover {
                        transform: translateY(-2px);
                        box-shadow: var(--shadow-lg);
                    }

                    .compatibility-score {
                        flex-shrink: 0;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        min-width: 5rem;
                    }

                    .compatibility-info {
                        flex-grow: 1;
                        margin-left: var(--space-4);
                        text-align: left;
                    }

                    .compatibility-info h4 {
                        margin-bottom: var(--space-2);
                        color: var(--primary-900);
                        font-weight: 600;
                        font-size: var(--font-size-lg);
                    }

                    .compatibility-message {
                        color: var(--primary-600);
                        font-size: var(--font-size-sm);
                        line-height: 1.5;
                    }

                    .score-circle {
                        width: 4rem;
                        height: 4rem;
                        border-radius: var(--radius-full);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: 700;
                        color: white;
                        margin-bottom: 0;
                        font-size: var(--font-size-lg);
                        box-shadow: var(--shadow-md);
                        border: 3px solid rgba(255, 255, 255, 0.2);
                    }

                    .score-excellent { background: linear-gradient(135deg, var(--success-500), var(--success-400)); }
                    .score-good { background: linear-gradient(135deg, #3b82f6, #60a5fa); }
                    .score-average { background: linear-gradient(135deg, var(--warning-500), var(--warning-400)); color: white; }
                    .score-caution { background: linear-gradient(135deg, #f97316, #fb923c); }
                    .score-poor { background: linear-gradient(135deg, var(--error-500), var(--error-400)); }

                    .score-level {
                        font-size: var(--font-size-xs);
                        font-weight: 600;
                        color: var(--primary-600);
                        text-align: center;
                        margin-top: var(--space-1);
                        white-space: nowrap;
                    }

                    .member-name-input {
                        width: 100%;
                        padding: var(--space-2);
                        border: 1px solid var(--primary-300);
                        border-radius: var(--radius-md);
                        margin-top: var(--space-3);
                        font-size: var(--font-size-sm);
                        background: var(--primary-50);
                        transition: all var(--transition-base);
                    }

                    .member-name-input:focus {
                        outline: none;
                        border-color: var(--accent-500);
                        background: white;
                        box-shadow: 0 0 0 2px rgba(var(--accent-500-rgb), 0.2);
                    }

                    .member-name-input::placeholder {
                        color: var(--primary-400);
                    }

                    .followership-card.selected .member-name-input {
                        background: rgba(255, 255, 255, 0.2);
                        border-color: rgba(255, 255, 255, 0.3);
                        color: white;
                    }

                    .followership-card.selected .member-name-input::placeholder {
                        color: rgba(255, 255, 255, 0.8);
                    }

                    .followership-card.selected .member-name-input:focus {
                        background: white;
                        color: var(--primary-900);
                        border-color: white;
                    }

                    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ê°œì„  */
                    @media (max-width: 768px) {
                        .followership-grid {
                            grid-template-columns: 1fr;
                            gap: var(--space-3);
                        }

                        .compatibility-item {
                            flex-direction: row;
                            gap: var(--space-4);
                        }

                        .compatibility-score {
                            min-width: 4rem;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                        }

                        .compatibility-info {
                            margin-left: var(--space-2);
                            text-align: left;
                        }

                        .compatibility-info h4 {
                            font-size: var(--font-size-base);
                            margin-bottom: var(--space-1);
                        }

                        .compatibility-message {
                            font-size: var(--font-size-xs);
                        }

                        .score-circle {
                            width: 3.5rem;
                            height: 3.5rem;
                            font-size: var(--font-size-base);
                        }

                        .followership-card {
                            padding: var(--space-4);
                        }

                        .followership-name {
                            font-size: var(--font-size-base);
                        }

                        .followership-desc {
                            font-size: var(--font-size-xs);
                        }

                        .member-name-input {
                            font-size: var(--font-size-xs);
                            padding: var(--space-2);
                        }
                    }

                    @media (max-width: 480px) {
                        .compatibility-item {
                            padding: var(--space-4);
                            gap: var(--space-3);
                        }

                        .compatibility-score {
                            min-width: 3.5rem;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                        }

                        .score-circle {
                            width: 3.5rem;
                            height: 3.5rem;
                            font-size: var(--font-size-base);
                        }

                        .compatibility-info {
                            margin-left: var(--space-1);
                            text-align: left;
                        }

                        .compatibility-info h4 {
                            font-size: var(--font-size-base);
                            line-height: 1.3;
                        }

                        .compatibility-message {
                            font-size: var(--font-size-xs);
                            line-height: 1.4;
                        }

                        .followership-card {
                            padding: var(--space-3);
                        }
                    }
                `;
                document.head.appendChild(style);
            }

            teamCompatibility.getFollowershipTypes().forEach(follower => {
                const card = document.createElement('div');
                card.className = 'followership-card';
                card.onclick = (e) => {
                    // ì´ë¦„ ì…ë ¥ í•„ë“œ í´ë¦­ ì‹œì—ëŠ” ì¹´ë“œ ì„ íƒ ì•ˆí•¨
                    if (e.target.tagName !== 'INPUT') {
                        toggleFollowerType(follower.id, card);
                    }
                };
                card.innerHTML = `
                    <div class="followership-name">${follower.name}</div>
                    <div class="followership-desc">${follower.description}</div>
                    <input type="text" class="member-name-input" placeholder="íŒ€ì› ì´ë¦„ ì…ë ¥ (ì„ íƒì‚¬í•­)"
                           style="display: none;"
                           oninput="updateMemberName('${follower.id}', this.value)">
                `;
                container.appendChild(card);
            });
        }

        function toggleFollowerType(followerId, element) {
            const index = selectedFollowerTypes.findIndex(item => item.id === followerId);
            const nameInput = element.querySelector('.member-name-input');

            if (index > -1) {
                selectedFollowerTypes.splice(index, 1);
                element.classList.remove('selected');
                nameInput.style.display = 'none';
                nameInput.value = '';
            } else {
                selectedFollowerTypes.push({
                    id: followerId,
                    name: teamCompatibility.getFollowershipTypes().find(f => f.id === followerId).name,
                    memberName: ''
                });
                element.classList.add('selected');
                nameInput.style.display = 'block';
                setTimeout(() => nameInput.focus(), 100);
            }

            document.getElementById('analyzeBtn').disabled = selectedFollowerTypes.length === 0;
        }

        function updateMemberName(followerId, memberName) {
            const follower = selectedFollowerTypes.find(item => item.id === followerId);
            if (follower) {
                follower.memberName = memberName;
            }
        }

        window.analyzeCompatibility = function() {
            console.log('=== analyzeCompatibility í•¨ìˆ˜ ì‹œì‘ ===');
            console.log('selectedFollowerTypes:', selectedFollowerTypes);

            try {
                const leadershipResult = assessment.determineLeadershipType();
                console.log('leadershipResult:', leadershipResult);

                const teamReport = teamCompatibility.generateTeamReport(leadershipResult, selectedFollowerTypes);
                console.log('teamReport:', teamReport);

                const resultsContainer = document.getElementById('compatibilityList');
                resultsContainer.innerHTML = '';

                teamReport.teamMembers.forEach(member => {
                    console.log('Processing member:', member);

                    // íŒ”ë¡œì›Œ ì •ë³´ê°€ ì—†ìœ¼ë©´ ìŠ¤í‚µ
                    if (!member.follower) {
                        console.error('Follower not found for member:', member);
                        return;
                    }

                    const item = document.createElement('div');
                    item.className = 'compatibility-item';

                    const scoreClass = getScoreClass(member.compatibility.score);

                    // íŒ€ì› ì´ë¦„ì´ ìˆìœ¼ë©´ í‘œì‹œ, ì—†ìœ¼ë©´ íŒ”ë¡œì›Œì‹­ ìœ í˜•ë§Œ í‘œì‹œ
                    const displayName = member.memberName
                        ? `${member.memberName} (${member.follower.name})`
                        : member.follower.name;

                    item.innerHTML = `
                        <div class="compatibility-score">
                            <div class="score-circle ${scoreClass}">${member.compatibility.score}</div>
                            <div class="score-level">${member.compatibility.level}</div>
                        </div>
                        <div class="compatibility-info">
                            <h4>${displayName}</h4>
                            <div class="compatibility-message">${member.compatibility.message}</div>
                        </div>
                    `;
                    resultsContainer.appendChild(item);
                });

                document.getElementById('compatibilityResults').style.display = 'block';
                console.log('=== ê¶í•© ë¶„ì„ ì™„ë£Œ ===');
            } catch (error) {
                console.error('analyzeCompatibility ì—ëŸ¬:', error);
                alert('íŒ€ ê¶í•© ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        function getScoreClass(score) {
            if (score >= 90) return 'score-excellent';
            if (score >= 80) return 'score-good';
            if (score >= 70) return 'score-average';
            if (score >= 60) return 'score-caution';
            return 'score-poor';
        }

        function resetAssessment() {
            assessment.reset();
            selectedFollowerTypes = [];
            currentQuestion = 0;

            // ëª¨ë°”ì¼ ì…ë ¥ ì •ë¦¬
            if (mobileInput) {
                mobileInput.destroy();
                mobileInput = null;
            }

            // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€ (destroy ëŒ€ì‹  hide ì‚¬ìš©)
            if (mobileNav) {
                mobileNav.hide();
            }

            document.getElementById('compatibilityResults').style.display = 'none';
            showSection('welcome');
        }

        // í…ŒìŠ¤íŠ¸ìš© ë‹¨ì¶•í‚¤ ê¸°ëŠ¥
        document.addEventListener('keydown', function(e) {
            console.log('í‚¤ ì´ë²¤íŠ¸ ê°ì§€:', e.key, 'Ctrl:', e.ctrlKey, 'Meta:', e.metaKey);

            // ì§„ë‹¨ í™”ë©´ì—ì„œë§Œ ì‘ë™
            const assessmentActive = document.getElementById('assessment').classList.contains('active');
            console.log('ì§„ë‹¨ í™”ë©´ í™œì„±:', assessmentActive);

            if (assessmentActive) {
                // Ctrl/Cmd + ìˆ«ìí‚¤ë¡œ ì ìˆ˜ ìë™ ì…ë ¥
                if ((e.ctrlKey || e.metaKey) && e.key >= '1' && e.key <= '6') {
                    e.preventDefault();
                    const value = parseInt(e.key);
                    console.log('ì ìˆ˜ ì…ë ¥ ì‹œë„:', value);

                    if (mobileInput) {
                        console.log('mobileInput ì¡´ì¬, setValue í˜¸ì¶œ');
                        mobileInput.setValue(value);
                        const question = assessment.getQuestion(currentQuestion);
                        assessment.recordResponse(question.id, value);
                        updateNextButton();
                        console.log('ì ìˆ˜ ì…ë ¥ ì™„ë£Œ:', value);
                    } else {
                        console.log('mobileInputì´ ì—†ìŒ');
                    }
                }

                // Ctrl/Cmd + F: ëª¨ë“  ì§ˆë¬¸ì„ 5ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì±„ìš°ê¸°
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'f') {
                    e.preventDefault();
                    console.log('ëª¨ë“  ì§ˆë¬¸ 5ì  ì±„ìš°ê¸° ì‹œì‘');
                    fillAllQuestionsWithScore(5);
                }

                // Ctrl/Cmd + H: ëª¨ë“  ì§ˆë¬¸ì„ ê³ ì ìˆ˜(6ì )ë¡œ ë¹ ë¥´ê²Œ ì±„ìš°ê¸°
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'h') {
                    e.preventDefault();
                    console.log('ëª¨ë“  ì§ˆë¬¸ 6ì  ì±„ìš°ê¸° ì‹œì‘');
                    fillAllQuestionsWithScore(6);
                }

                // Ctrl/Cmd + L: ëª¨ë“  ì§ˆë¬¸ì„ ì €ì ìˆ˜(2ì )ë¡œ ë¹ ë¥´ê²Œ ì±„ìš°ê¸°
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'l') {
                    e.preventDefault();
                    console.log('ëª¨ë“  ì§ˆë¬¸ 2ì  ì±„ìš°ê¸° ì‹œì‘');
                    fillAllQuestionsWithScore(2);
                }

                // ì¶”ê°€: ë‹¨ìˆœí•œ ìˆ«ìí‚¤ë§Œìœ¼ë¡œë„ ì ìˆ˜ ì…ë ¥ ê°€ëŠ¥ (Ctrl/Cmd ì—†ì´)
                if (!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey && e.key >= '1' && e.key <= '6') {
                    const value = parseInt(e.key);
                    console.log('ë‹¨ìˆœ ìˆ«ìí‚¤ ì…ë ¥:', value);

                    if (mobileInput) {
                        mobileInput.setValue(value);
                        const question = assessment.getQuestion(currentQuestion);
                        assessment.recordResponse(question.id, value);
                        updateNextButton();
                        console.log('ë‹¨ìˆœ ìˆ«ìí‚¤ë¡œ ì ìˆ˜ ì…ë ¥ ì™„ë£Œ:', value);
                    }
                }
            }
        });

        // ëª¨ë“  ì§ˆë¬¸ì„ íŠ¹ì • ì ìˆ˜ë¡œ ì±„ìš°ëŠ” í•¨ìˆ˜
        function fillAllQuestionsWithScore(score) {
            const totalQuestions = assessment.getTotalQuestions();

            // ëª¨ë“  ì§ˆë¬¸ì— ì ìˆ˜ ê¸°ë¡
            for (let i = 0; i < totalQuestions; i++) {
                const question = assessment.getQuestion(i);
                assessment.recordResponse(question.id, score);
            }

            // í˜„ì¬ ì§ˆë¬¸ì˜ UI ì—…ë°ì´íŠ¸
            if (mobileInput) {
                mobileInput.setValue(score);
            }
            updateNextButton();

            // ì•ˆë‚´ ë©”ì‹œì§€
            console.log(`ëª¨ë“  ì§ˆë¬¸ì´ ${score}ì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ 'ë‹¤ìŒ' ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ë„˜ì–´ê°€ì„¸ìš”.`);
        }

        // ë‹¨ì¶•í‚¤ ì•ˆë‚´ í•¨ìˆ˜ (ì½˜ì†”ì—ì„œ í™•ì¸ ê°€ëŠ¥)
        window.showTestShortcuts = function() {
            console.log(`
=== í…ŒìŠ¤íŠ¸ìš© ë‹¨ì¶•í‚¤ ì•ˆë‚´ ===
ì§„ë‹¨ í™”ë©´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥:

ğŸ”¢ ì ìˆ˜ ì…ë ¥:
â€¢ 1~6 ìˆ«ìí‚¤: í˜„ì¬ ì§ˆë¬¸ì— í•´ë‹¹ ì ìˆ˜ ì…ë ¥ (ê°„ë‹¨!)
â€¢ Ctrl/Cmd + 1~6: í˜„ì¬ ì§ˆë¬¸ì— í•´ë‹¹ ì ìˆ˜ ì…ë ¥

âš¡ ë¹ ë¥¸ ì±„ìš°ê¸°:
â€¢ Ctrl/Cmd + F: ëª¨ë“  ì§ˆë¬¸ì„ 5ì ìœ¼ë¡œ ì±„ìš°ê¸°
â€¢ Ctrl/Cmd + H: ëª¨ë“  ì§ˆë¬¸ì„ ê³ ì ìˆ˜(6ì )ë¡œ ì±„ìš°ê¸°
â€¢ Ctrl/Cmd + L: ëª¨ë“  ì§ˆë¬¸ì„ ì €ì ìˆ˜(2ì )ë¡œ ì±„ìš°ê¸°

ğŸ’¡ íŒ: ìˆ«ìí‚¤ 1~6ë§Œ ëˆŒëŸ¬ë„ ì ìˆ˜ê°€ ì…ë ¥ë©ë‹ˆë‹¤!

ì½˜ì†”ì—ì„œ showTestShortcuts() í˜¸ì¶œí•˜ë©´ ì´ ì•ˆë‚´ë¥¼ ë‹¤ì‹œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
========================
            `);
        };

        // ì´ˆê¸° ë¡œë”© ì• ë‹ˆë©”ì´ì…˜
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.body.style.opacity = '1';

                // ëª¨ë°”ì¼ í™”ë©´ì—ì„œë§Œ MobileNavigationManager ì´ˆê¸°í™” ë° ìˆ¨ê¹€
                if (window.innerWidth <= 768) {
                    if (!mobileNav) {
                        mobileNav = new MobileNavigationManager();
                    }
                    // ì´ˆê¸° ë¡œë“œ ì‹œ ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€ (ì‹œì‘ í˜ì´ì§€ì´ë¯€ë¡œ)
                    mobileNav.hide();
                }

                // ê°œë°œ ëª¨ë“œì¼ ë•Œ ë‹¨ì¶•í‚¤ ì•ˆë‚´ í‘œì‹œ
                if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                    console.log('ğŸš€ ê°œë°œ ëª¨ë“œ: í…ŒìŠ¤íŠ¸ìš© ë‹¨ì¶•í‚¤ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. showTestShortcuts()ë¥¼ ì…ë ¥í•˜ì—¬ ë‹¨ì¶•í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                }
            }, 100);
        });
    </script>
</body>
</html>